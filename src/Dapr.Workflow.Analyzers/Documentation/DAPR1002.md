## DAPR1002

| Type Name | Check ID | Category |
| -- | -- | -- |
| DAPR1002WorkflowActivityDependencyInjectionValidationAnalyzer | DAPR1002 | Workfloww |

## Cause

A type that implements `IWorkflowActivity` has not been registered with the dependency injection service provider.

## Rule description

A violation of this rule occurs when a type is found to implement `IWorkflowActivity`, `WorkflowActivity` or a derivative thereof that doesn't itself get 
registered within dependency injection service provider as part of the `AddDaprWorkflow` method invocation.

A typical Dapr workflow activity class resembles the following:
```csharp
public class NotifyActivity : WorkflowActivity<Notification, object>
{
    //Activity implementation
}
```


A typical Dapr workflow activity registration that properly registers the `NotifyActivity` type above looks as follows:

```csharp
var builder = Host.CreateDefaultBuilder(args).ConfigureServices(services =>
{
    services.AddDaprWorkflow(options =>
    {
        // This is the workflow being registered.
        options.RegisterWorkflow<OrderProcessingWorkflow>();

        // These are the activities that get invoked by the workflow(s).
        options.RegisterActivity<NotifyActivity>();
        options.RegisterActivity<ReserveInventoryActivity>();
        options.RegisterActivity<RequestApprovalActivity>();
        options.RegisterActivity<ProcessPaymentActivity>();
        options.RegisterActivity<UpdateInventoryActivity>();
    });
});
```

This rule is violated when the workflow registration demonstrated above fails to include the line `options.RegisterActivity<NotifyActivity>();` meaning 
that this workflow would not be found by the dependency injection functionality at runtime and would then throw an exception accordingly.

## How to fix violations

To fix a violation of this rule, ensure you have a line within the `AddDaprWorkflow` method invocation against your service provider that registers
a workflow activity providing your workflow activity type as the generic parameter as in the example above for the `NotifyActivity` type.

## How to suppress violations
```csharp
#pragma warning disable DAPR1002 // WorkflowActivityDependencyInjectionValidation
```