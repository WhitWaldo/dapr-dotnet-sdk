## DAPR1001

| Type Name | Check ID | Category |
| -- | -- | -- |
| DAPR1001WorkflowDependencyInjectionValidationAnalyzer | DAPR1001 | Workflow |

## Cause

A type that implements `IWorkflow` has not been registered with the dependency injection service provider.

## Rule description

A violation of this rule occurs when a type is found to implement `IWorkflow`, `Workflow` or a derivative thereof that doesn't itself get 
registered within dependency injection service provider as part of the `AddDaprWorkflow` method invocation.

A typical Dapr workflow class resembles the following:
```csharp
public class OrderProcessingWorkflow : Workflow<OrderPayload, OrderResult>
{
    //Workflow implementation
}
```


A typical Dapr workflow registration that properly registers the `OrderProcessingWorkflow` type above looks as follows:

```csharp
var builder = Host.CreateDefaultBuilder(args).ConfigureServices(services =>
{
    services.AddDaprWorkflow(options =>
    {
        // This is the workflow being registered.
        options.RegisterWorkflow<OrderProcessingWorkflow>();

        // These are the activities that get invoked by the workflow(s).
        options.RegisterActivity<NotifyActivity>();
        options.RegisterActivity<ReserveInventoryActivity>();
        options.RegisterActivity<RequestApprovalActivity>();
        options.RegisterActivity<ProcessPaymentActivity>();
        options.RegisterActivity<UpdateInventoryActivity>();
    });
});
```

This rule is violated when the workflow registration demonstrated above fails to include the line `options.RegisterWorkflow<OrderProcessingWorkflow>();` meaning 
that this workflow would not be found by the dependency injection functionality at runtime and would then throw an exception accordingly.

## How to fix violations

To fix a violation of this rule, ensure you have a line within the `AddDaprWorkflow` method invocation against your service provider that registers
a workflow providing your workflow type as the generic parameter as in the example above for the `OrderProcessingWorkflow` type.

## How to suppress violations
```csharp
#pragma warning disable DAPR1001 // WorkflowDependencyInjectionValidation
```